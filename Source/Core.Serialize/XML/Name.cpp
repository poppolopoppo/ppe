#include "stdafx.h"

#include "Name.h"

#include "Core/Meta/AlignedStorage.h"

namespace Core {
namespace XML {
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
namespace {
//----------------------------------------------------------------------------
static POD_STORAGE(XML::FName) _gAnyStorage;
//----------------------------------------------------------------------------
} //!namespace
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
const XML::FName& XML::FName::Any = reinterpret_cast<XML::FName&>(_gAnyStorage);
//----------------------------------------------------------------------------
bool FNameTokenTraits::IsAllowedChar(char ch) const {
    return IsAlnum(ch) || ch == '_' || ch == '-' || ch == '.';
}
//----------------------------------------------------------------------------
void FName::Start(size_t reserve) {

    parent_type::Start(reserve);

    new ((void*)&_gAnyStorage) FName("_.A.-.N.-.Y._");
}
//----------------------------------------------------------------------------
void FName::Shutdown() {

    reinterpret_cast<XML::FName&>(_gAnyStorage).~FName();

    parent_type::Shutdown();
}
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace XML
} //!namespace Core
