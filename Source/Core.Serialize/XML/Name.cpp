#include "stdafx.h"

#include "Name.h"

#include "Core/Memory/AlignedStorage.h"

namespace Core {
namespace XML {
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
namespace {
//----------------------------------------------------------------------------
static POD_STORAGE(XML::Name) _gAnyStorage;
//----------------------------------------------------------------------------
} //!namespace
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
const XML::Name& XML::Name::Any = reinterpret_cast<XML::Name&>(_gAnyStorage);
//----------------------------------------------------------------------------
bool NameTokenTraits::IsAllowedChar(char ch) const {
    return IsAlnum(ch) || ch == '_' || ch == '-' || ch == '.';
}
//----------------------------------------------------------------------------
void Name::Start(size_t reserve) {

    parent_type::Start(reserve);

    new ((void*)&_gAnyStorage) Name("_.A.-.N.-.Y._");
}
//----------------------------------------------------------------------------
void Name::Shutdown() {

    reinterpret_cast<XML::Name&>(_gAnyStorage).~Name();

    parent_type::Shutdown();
}
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace XML
} //!namespace Core
