#include "stdafx.h"

#include "ThreadPool.h"

#include <thread>

namespace Core {
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
void GlobalThreadPool::Create() {
    parent_type::Create("GlobalThreadPool", std::thread::hardware_concurrency() /* one per logical core */);
}
//----------------------------------------------------------------------------
void IOThreadPool::Create() {
    parent_type::Create("IOThreadPool", 1ul /* IO should be operated in 1 thread to prevent slow seeks */);
}
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
void ThreadPoolStartup::Start() {
    GlobalThreadPool::Create();
    IOThreadPool::Create();
}
//----------------------------------------------------------------------------
void ThreadPoolStartup::Shutdown() {
    IOThreadPool::Destroy();
    GlobalThreadPool::Destroy();
}
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace Core
