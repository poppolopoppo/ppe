#include "stdafx.h"

#include "Task.h"

#include "TaskManager.h"

namespace Core {
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
FTask::operator TaskDelegate () {
    return TDelegate(&FTask::RunAndSuicide, this);
}
//----------------------------------------------------------------------------
void FTask::RunAndSuicide(ITaskContext& ctx) {
    const PCTask suicidal(this); // will delete the task if nobody has a reference on it
    Run(ctx);
}
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace Core
