#include "stdafx.h"

#include "Task.h"

#include "TaskManager.h"

namespace Core {
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
Task::operator TaskDelegate () {
    return Delegate(&Task::RunAndSuicide, this);
}
//----------------------------------------------------------------------------
void Task::RunAndSuicide(ITaskContext& ctx) {
    const PCTask suicidal(this); // will delete the task if nobody has a reference on it
    Run(ctx);
}
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace Core
