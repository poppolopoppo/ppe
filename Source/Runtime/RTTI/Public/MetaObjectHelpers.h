#pragma once

#include "RTTI.h"

#include "RTTI_fwd.h"

#include "Container/Vector.h"
#include "Memory/RefPtr.h"

namespace PPE {
namespace RTTI {
class FMetaClass;
FWD_REFPTR(MetaObject);
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
PPE_RTTI_API bool Equals(const FMetaObject& lhs, const FMetaObject& rhs);
//----------------------------------------------------------------------------
PPE_RTTI_API bool DeepEquals(const FMetaObject& lhs, const FMetaObject& rhs);
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
PPE_RTTI_API void Move(const FMetaObject& src, FMetaObject& dst);
//----------------------------------------------------------------------------
PPE_RTTI_API void Copy(const FMetaObject& src, FMetaObject& dst);
//----------------------------------------------------------------------------
PPE_RTTI_API void Swap(FMetaObject& lhs, FMetaObject& rhs);
//----------------------------------------------------------------------------
PPE_RTTI_API void Clone(const FMetaObject& src, PMetaObject& pdst);
//----------------------------------------------------------------------------
PPE_RTTI_API void DeepCopy(const FMetaObject& src, FMetaObject& dst);
//----------------------------------------------------------------------------
PPE_RTTI_API void DeepClone(const FMetaObject& src, PMetaObject& pdst);
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
PPE_RTTI_API void ResetToDefaultValue(FMetaObject& obj);
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
PPE_RTTI_API hash_t hash_value(const FMetaObject& obj);
//----------------------------------------------------------------------------
PPE_RTTI_API u128 Fingerprint128(const FMetaObject& obj);
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
using FReferencedObjects = VECTORINSITU(MetaObject, FMetaObject*, 8);
PPE_RTTI_API void CollectReferencedObjects(
    const FMetaObject& root,
    FReferencedObjects& references,
    size_t maxDepth = INDEX_NONE );
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace RTTI
} //!namespace PPE

namespace PPE {
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
PPE_RTTI_API FTextWriter& operator << (FTextWriter& oss, const RTTI::FMetaObject& obj);
PPE_RTTI_API FWTextWriter& operator << (FWTextWriter& oss, const RTTI::FMetaObject& obj);
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace PPE
