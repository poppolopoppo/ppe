#include "stdafx.h"

#include "HAL/TargetRHI.h"

#include "Diagnostic/Logger.h"

#include "HAL/Vulkan/VulkanTargetRHI.h"

namespace PPE {
namespace RHI {
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
namespace {
//----------------------------------------------------------------------------
static const ITargetRHI* GAllRHIs[] = {
    /* Vulkan  */&FVulkanTargetRHI::Get(),
    // #TODO add future RHIs here
};
//----------------------------------------------------------------------------
} //!namespace
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
TMemoryView<const ITargetRHI* const> AllTargetRHIs() {
    return MakeConstView(GAllRHIs);
}
//----------------------------------------------------------------------------
const ITargetRHI& TargetRHI(ETargetRHI rhi) {
    AssertRelease(rhi == ETargetRHI::Vulkan); // #TODO
    STATIC_ASSERT(size_t(ETargetRHI::Vulkan) == 0);
    return (*GAllRHIs[size_t(ETargetRHI::Vulkan)]);
}
//----------------------------------------------------------------------------
//////////////////////////////////////////////////////////////////////////////
//----------------------------------------------------------------------------
} //!namespace RHI
} //!namespace PPE
