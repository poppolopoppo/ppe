#once

;    _____           __ _____ _____  _  __
;   |  __ \         / _/ ____|  __ \| |/ /
;   | |__) |__ _ __| || (___ | |  | | ' /
;   |  ___/ _ \ '__|  _\___ \| |  | |  <
;   | |  |  __/ |  | | ____) | |__| | . \
;   |_|   \___|_|  |_||_____/|_____/|_|\_\
;

// instrumentation du profiler de visual studio
#define USE_MSVC_PERFORMANCE_TOOLS

//------------------------------------------------------------------------------
// Visual Studio Performance Tools
//------------------------------------------------------------------------------
#if USE_MSVC_PERFORMANCE_TOOLS
{
    Print( 'Using Visual Studio Performance Tools' )

    .PerfSDK_Win32 =
    [
        .PerfSDKRelativePath    = 'Team Tools\Performance Tools\PerfSDK'
    ]
    .PerfSDK_x64 =
    [
        .PerfSDKRelativePath    = 'Team Tools\Performance Tools\PerfSDK\x64'
    ]

    .ExternalCompileConfigs = {}
    ForEach( .CompileConfig in .AllCompileConfigs )
    {
        .ExternalConfig =
        [
            Using( .CompileConfig )
            Using( ."PerfSDK_$Platform$" )

            .PerfSDKPath        = '$VSBasePath$\$PerfSDKRelativePath$'
            .IncludePaths       + '$PerfSDKPath$'
            .LinkerOptions      + ' /LIBPATH:"$PerfSDKPath$"'
        ]
        ^ExternalCompileConfigs + .ExternalConfig
    }

    ^AllCompileConfigs = .ExternalCompileConfigs
}
#endif //!USE_MSVC_PERFORMANCE_TOOLS
