
//------------------------------------------------------------------------------
// Compressed executable Generation (.exe)
//------------------------------------------------------------------------------
; Inputs :
;   <BinaryPrefix>          prefix of the binary
;   <ProjectName>           name of the project
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Executable Configurations
//------------------------------------------------------------------------------
ForEach( .CompileConfig in .AllCompileConfigs )
{
    Using( .CompileConfig )

    // Compressed binary executable
    Exec( '$ProjectName$-$Platform$-$Config$-UPX' )
    {
        .ExecInput  = '$BinaryDirectory$\$BinaryPrefix$.$Config$.$Platform$.exe'
        .ExecOutput = '$BinaryDirectory$\$BinaryPrefix$.$Config$.$Platform$.upx.exe'

        .ExecArguments  = '--best --brute -o"%2" "%1"'
        .ExecWorkingDir = '$SolutionPath$/Externals/UPX'
#if __WINDOWS__
        .ExecExecutable = '$ExecWorkingDir$/upx.exe'
#endif
    }
}
